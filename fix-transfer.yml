---
- name: Fix Transfer
  hosts: all

  tasks:

  - name: Extract WordPress tarball directly to html directory
    unarchive:
        src: /home/ec2-user/wordpress-6.7.1-en_AU.tar.gz
        dest: /home/ec2-user/html/
        remote_src: yes
        extra_opts: [--strip-components=1]
    become: yes

  - name: Remove wordfence files in root directory
    command: rm -rf /home/ec2-user/html/wordfence-waf.php
    ignore_errors: yes
  - name: Remove nginx.conf
    command: rm -rf /home/ec2-user/html/nginx.conf
    ignore_errors: yes
  - name: Remove class_entra_database_token_utility.php
    command: rm -rf /home/ec2-user/html/class_entra_database_token_utility.php
    ignore_errors: yes
